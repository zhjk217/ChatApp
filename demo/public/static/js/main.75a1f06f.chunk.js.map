{"version":3,"sources":["Components/ChatMessages.js","Services/socket.js","Components/ChatRoom.js","Components/SignIn.js","Components/Register.js","Components/UI.js","Components/Signout.js","Components/Loading.js","App.js","index.js"],"names":["ChatMessages","props","message","photoURL","name","uid","msg","messageClass","firebase","auth","currentUser","className","src","alt","split","map","item","socket","io","ChatRoom","useState","formValue","setFormValue","chatData","setChatData","constructorHasRun","setConstructorHasRun","useEffect","emit","on","obj","sendMessage","e","a","preventDefault","user","data","displayName","slice","reverse","value","onChange","target","placeholder","disabled","onClick","role","aria-label","SignIn","type","id","class","email","$","val","pw","signInWithEmailAndPassword","then","userCredential","console","log","alert","catch","error","errorMessage","provider","GoogleAuthProvider","signInWithPopup","Register","cpw","search","length","post","res","status","UI","Status","SetStatus","getstatus","boolean","animate","marginLeft","SignOut","signOut","Loading","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","App","useAuthState","loading","setLoading","setTimeout","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.75a1f06f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport firebase from \"firebase\";\r\nimport \"firebase/database\";\r\nimport \"../Stylesheets/ChatMessage.css\";\r\n\r\nexport default function ChatMessages(props) {\r\n    const { photoURL,name,uid,msg } = props.message;\r\n    const messageClass =\r\n      uid === firebase.auth().currentUser.uid ? \"sent\" : \"received\";\r\n    return (\r\n      <>\r\n        <div className={`message ${messageClass}`}>\r\n          <img\r\n            src={\r\n              photoURL ||\r\n              \"https://png.pngtree.com/png-vector/20190217/ourlarge/pngtree-vector-chat-icon-png-image_555480.jpg\"\r\n            }\r\n            alt=\"profile_pic\"\r\n          />\r\n          <div>\r\n          <p className=\"name\">{name}</p>\r\n          <div>{msg.split('\\n').map(function(item) {\r\n                  return (\r\n                    <p>\r\n                      {item}\r\n                    </p>\r\n                  )\r\n                })} </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }","import io from \"socket.io-client\";\r\nconst  SOCKET_URL= 'http://localhost:3001';\r\n\r\nexport const socket = io();\r\n","import React ,{ useState,useEffect} from \"react\";\r\nimport \"../Stylesheets/ChatRoom.css\";\r\nimport firebase from \"firebase\";\r\nimport \"firebase/auth\";\r\nimport ChatMessage from './ChatMessages';\r\nimport {socket} from '../Services/socket';\r\n\r\nexport const ChatRoom =()=> {\r\n\r\n  const [formValue, setFormValue] = useState(\"\");\r\n\r\n  const [chatData, setChatData] = useState([]);\r\n\r\n  const [constructorHasRun, setConstructorHasRun] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (constructorHasRun) return;\r\n    socket.emit('enterChat',firebase.auth().currentUser.uid);\r\n    socket.on('getMsg', function (obj) {\r\n      setChatData(obj);  \r\n    });\r\n    setConstructorHasRun(true);\r\n}, [chatData]);\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    var user = firebase.auth().currentUser;\r\n    var data = {\r\n      'photoURL':user.photoURL,\r\n      'name': user.displayName,\r\n      'uid': user.uid,\r\n      'msg': formValue,\r\n    };\r\n    await socket.emit('msg', data);\r\n    setFormValue(\"\");\r\n  };\r\n  return (\r\n    <>\r\n    <main>\r\n    {chatData.slice(0).reverse().map((message)=><ChatMessage message={message}/>)}\r\n    </main>\r\n  <div className=\"ChatRoom\">\r\n        <textarea value={formValue}\r\n          onChange={(e) => setFormValue(e.target.value)}\r\n          placeholder=\"let's Chat\"\r\n          >\r\n          \r\n          </textarea>\r\n\r\n        <button disabled={!formValue} onClick={sendMessage}>\r\n          <span role=\"img\" aria-label=\"message\">\r\n            💌{\" \"}\r\n          </span>\r\n          Send\r\n        </button> \r\n  </div>\r\n  </>);\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport '../Stylesheets/SignIn.css';\r\nimport $ from \"jquery\";\r\nimport firebase from \"firebase\";\r\nimport \"firebase/auth\";\r\n\r\nexport default function SignIn() {\r\n\r\n  const SentLoginData = () => { \r\n\r\n    var email = $('#Email').val();\r\n    var pw = $('#Password').val();\r\n\r\n    //前端取資料\r\n    if (!email || !pw) {\r\n      alert('請輸入帳號密碼!');\r\n    } else {\r\n      //data\r\n      firebase.auth().signInWithEmailAndPassword(email, pw)\r\n        .then((userCredential) => {\r\n          // Signed in\r\n          //var user = userCredential.user;\r\n          console.log(userCredential.user.uid);\r\n          alert(\"登入成功\");\r\n          // ...\r\n        })\r\n        .catch((error) => {\r\n          //var errorCode = error.code;\r\n          var errorMessage = error.message;\r\n\r\n          alert(\"登入失敗\"+errorMessage);\r\n        });\r\n      //post\r\n    }\r\n  };\r\n\r\n  const googleSignInOption = () => {\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n    firebase.auth().signInWithPopup(provider);\r\n  };\r\n\r\n  return ( <div className = \"SignIn\" >\r\n    <span > </span> <div >\r\n    <input type = \"text\" id = \"Email\" placeholder = \"Email\" />\r\n    </div> \r\n    <div >\r\n    <input type = \"text\"\r\n    id = \"Password\"\r\n    placeholder = \"Password\" />\r\n    </div> <span> </span> <div class = \"btn\" >\r\n    <button onClick = {SentLoginData} > SignIn </button> \r\n    <button onClick={googleSignInOption}>\r\n    <img src = \"https://img.icons8.com/plasticine/100/000000/google-logo.png\"\r\n    alt = \"google\" />\r\n    </button> </div> </div>\r\n  );\r\n}","import React from \"react\";\r\nimport '../Stylesheets/Register.css';\r\nimport $ from \"jquery\";\r\nimport firebase from \"firebase\";\r\nimport \"firebase/auth\";\r\n\r\nexport default function Register() {\r\n\r\n  const SentRegisterData=() =>{\r\n    \r\n    var name = $('#Username').val();\r\n    var email = $('#Email').val();\r\n    var pw = $('#Password').val();\r\n    var cpw = $('#CheckPassword').val();\r\n    //前端取資料\r\n    if (!name || !email || !pw || !cpw) {\r\n      alert('請輸入未填欄位!');\r\n    } else if(email.search('@')===-1){\r\n      alert('並未電子信箱');\r\n    } else if(pw.length<6){\r\n      alert('密碼太短');\r\n    } \r\n    else if (pw !== cpw) {\r\n      alert('兩次輸入密碼不相同!');\r\n        //除錯\r\n    } else {\r\n        var api = \"/member/register\";\r\n        //url 連線api\r\n        var data = {\r\n            'name': name,\r\n            'email': email,\r\n            'password': pw,\r\n            'checkpassword' : cpw,\r\n        };\r\n        //data\r\n        $.post(api, data, function (res) {\r\n            if (res.status === 0) {\r\n                //cookie.set('zhjk217chatapp', data, { expires: 7, path: '/' });\r\n                firebase\r\n                  .auth()\r\n                  .signInWithEmailAndPassword(email, pw)\r\n                  .then((userCredential) => {\r\n                    // Signed in\r\n                    //var user = userCredential.user;\r\n                    console.log(userCredential.user.uid);\r\n                    alert(\"註冊成功\");\r\n                    // ...\r\n                  })\r\n                  .catch((error) => {\r\n                  //var errorCode = error.code;\r\n                  var errorMessage = error.message;\r\n\r\n                  alert(\"註冊失敗\"+errorMessage);\r\n                   });\r\n                  //post\r\n            }\r\n            else{\r\n              alert(res.msg);\r\n            }\r\n            });\r\n        //post\r\n  };\r\n};\r\n  return (\r\n    <div className=\"Register\">\r\n        <div>\r\n            <input type=\"text\" id=\"Username\" placeholder=\"UserName\"/>\r\n        </div>\r\n        <div>\r\n          <input type=\"text\" id=\"Email\" placeholder=\"Email\"/>\r\n        </div>\r\n        <div>\r\n           <input type=\"password\" id=\"Password\" placeholder=\"Password\"/>\r\n        </div>\r\n        <div>\r\n            <input type=\"password\" id=\"CheckPassword\" placeholder=\"CheckPassword\"/>\r\n        </div>\r\n        <div class=\"btn\">\r\n      <button onClick={SentRegisterData}>Register</button>\r\n   \r\n      </div>\r\n     </div>\r\n  );\r\n}","import React, { useState } from \"react\";\r\nimport $ from \"jquery\";\r\nimport '../Stylesheets/UI.css';\r\nimport SignIn from \"./SignIn\";\r\nimport Register from \"./Register\";\r\n\r\nexport default function UI() {\r\n\r\n  const [Status, SetStatus] = useState(true);\r\n\r\n  const getstatus = (boolean) =>{\r\n    SetStatus(boolean);\r\n\r\n    if(!boolean)\r\n    $('.floatline').animate({marginLeft:\"300px\"});\r\n    else\r\n    $('.floatline').animate({marginLeft:\"0px\"});\r\n  };\r\n  return (\r\n    <div className=\"UI\">\r\n      <div className=\"form\">\r\n        <h3>Welcome</h3>\r\n        <div className=\"status\">\r\n          <span></span>\r\n         \r\n          <div className=\"signin\" onClick={() =>getstatus(true)}><div className=\"floatline\"></div>SignIn</div>\r\n          <div className=\"register\" onClick={() =>getstatus(false)}>Register</div>\r\n        </div>\r\n        {Status ? <SignIn /> : <Register />}\r\n      </div>\r\n      </div>\r\n  );\r\n}","import React from \"react\";\r\nimport firebase from \"firebase\";\r\nimport \"firebase/auth\";\r\n\r\nexport default function SignOut() {\r\n    const cleardata=() =>{\r\n        firebase.auth().signOut()\r\n            .then((userCredential) => {\r\n            // Sign-out successful.\r\n            console.log(userCredential.user.uid);\r\n            })\r\n            .catch((error) => {\r\n            // An error happened.\r\n            });\r\n    }\r\n    return(\r\n        firebase.auth().currentUser &&(<button onClick={cleardata}>SignOut</button>) \r\n    );\r\n};","import React from 'react';\r\nimport { CircleLoading } from 'react-loadingg';\r\nconst Loading = () => <CircleLoading />;\r\nexport default Loading;","import React,{useEffect,useState} from 'react';\nimport \"./Stylesheets/App.css\";\nimport {ChatRoom} from './Components/ChatRoom';\nimport UI from './Components/UI';\nimport SignOut from \"./Components/Signout\";\nimport firebase from \"firebase\";\nimport \"firebase/auth\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport Loading from \"./Components/Loading\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDIFKORtZaeCcWSA7kuhb0c1Aw7-vtq-hU\",\n  authDomain: \"chatapp-84774.firebaseapp.com\",\n  databaseURL: \"https://chatapp-84774-default-rtdb.firebaseio.com\",\n  projectId: \"chatapp-84774\",\n  storageBucket: \"chatapp-84774.appspot.com\",\n  messagingSenderId: \"543391953679\",\n  appId: \"1:543391953679:web:c4f5fe4cb3cffea650847a\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nconst auth = firebase.auth();\n\nfunction App() {\n  \n  const [user] = useAuthState(auth);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    setTimeout(function() {\n      setLoading(false);\n    },400);\n  },[]);\n    return (<>\n      {loading ? <Loading />: <div className=\"App\">\n      <header>\n        <h1>\n          <span role=\"img\" aria-label=\"message\">\n            Community Chat App 💬\n          </span>\n        </h1>\n        <SignOut />\n      </header>\n      <section>{user ? <ChatRoom /> : <UI user/>}</section>\n    </div>}\n    </>\n    );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Stylesheets/index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}
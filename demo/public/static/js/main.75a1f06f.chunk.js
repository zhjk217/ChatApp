(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),s=n(54),i=n.n(s),r=(n(68),n(19)),l=(n(69),n(33)),o=n.n(l),j=n(55),u=(n(71),n(11)),d=(n(22),n(73),n(74),n(3));function h(e){var t=e.message,n=t.photoURL,c=t.name,a=t.uid,s=t.msg,i=a===u.a.auth().currentUser.uid?"sent":"received";return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"message ".concat(i),children:[Object(d.jsx)("img",{src:n||"https://png.pngtree.com/png-vector/20190217/ourlarge/pngtree-vector-chat-icon-png-image_555480.jpg",alt:"profile_pic"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"name",children:c}),Object(d.jsxs)("div",{children:[s.split("\n").map((function(e){return Object(d.jsx)("p",{children:e})}))," "]})]})]})})}var b=n(57),p=n.n(b)()(),O=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),i=Object(r.a)(s,2),l=i[0],b=i[1],O=Object(c.useState)(!1),m=Object(r.a)(O,2),x=m[0],f=m[1];Object(c.useEffect)((function(){x||(p.emit("enterChat",u.a.auth().currentUser.uid),p.on("getMsg",(function(e){b(e)})),f(!0))}),[l]);var g=function(){var e=Object(j.a)(o.a.mark((function e(t){var c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=u.a.auth().currentUser,s={photoURL:c.photoURL,name:c.displayName,uid:c.uid,msg:n},e.next=5,p.emit("msg",s);case 5:a("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("main",{children:l.slice(0).reverse().map((function(e){return Object(d.jsx)(h,{message:e})}))}),Object(d.jsxs)("div",{className:"ChatRoom",children:[Object(d.jsx)("textarea",{value:n,onChange:function(e){return a(e.target.value)},placeholder:"let's Chat"}),Object(d.jsxs)("button",{disabled:!n,onClick:g,children:[Object(d.jsxs)("span",{role:"img","aria-label":"message",children:["\ud83d\udc8c"," "]}),"Send"]})]})]})},m=n(13),x=n.n(m);n(105),n(106);function f(){return Object(d.jsxs)("div",{className:"SignIn",children:[Object(d.jsx)("span",{children:" "})," ",Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",id:"Email",placeholder:"Email"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",id:"Password",placeholder:"Password"})})," ",Object(d.jsx)("span",{children:" "})," ",Object(d.jsxs)("div",{class:"btn",children:[Object(d.jsx)("button",{onClick:function(){var e=x()("#Email").val(),t=x()("#Password").val();e&&t?u.a.auth().signInWithEmailAndPassword(e,t).then((function(e){console.log(e.user.uid),alert("\u767b\u5165\u6210\u529f")})).catch((function(e){var t=e.message;alert("\u767b\u5165\u5931\u6557"+t)})):alert("\u8acb\u8f38\u5165\u5e33\u865f\u5bc6\u78bc!")},children:" SignIn "}),Object(d.jsx)("button",{onClick:function(){var e=new u.a.auth.GoogleAuthProvider;u.a.auth().signInWithPopup(e)},children:Object(d.jsx)("img",{src:"https://img.icons8.com/plasticine/100/000000/google-logo.png",alt:"google"})})," "]})," "]})}n(107);function g(){return Object(d.jsxs)("div",{className:"Register",children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",id:"Username",placeholder:"UserName"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",id:"Email",placeholder:"Email"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"password",id:"Password",placeholder:"Password"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"password",id:"CheckPassword",placeholder:"CheckPassword"})}),Object(d.jsx)("div",{class:"btn",children:Object(d.jsx)("button",{onClick:function(){var e=x()("#Username").val(),t=x()("#Email").val(),n=x()("#Password").val(),c=x()("#CheckPassword").val();if(e&&t&&n&&c)if(-1===t.search("@"))alert("\u4e26\u672a\u96fb\u5b50\u4fe1\u7bb1");else if(n.length<6)alert("\u5bc6\u78bc\u592a\u77ed");else if(n!==c)alert("\u5169\u6b21\u8f38\u5165\u5bc6\u78bc\u4e0d\u76f8\u540c!");else{var a={name:e,email:t,password:n,checkpassword:c};x.a.post("/member/register",a,(function(e){0===e.status?u.a.auth().signInWithEmailAndPassword(t,n).then((function(e){console.log(e.user.uid),alert("\u8a3b\u518a\u6210\u529f")})).catch((function(e){var t=e.message;alert("\u8a3b\u518a\u5931\u6557"+t)})):alert(e.msg)}))}else alert("\u8acb\u8f38\u5165\u672a\u586b\u6b04\u4f4d!")},children:"Register"})})]})}function v(){var e=Object(c.useState)(!0),t=Object(r.a)(e,2),n=t[0],a=t[1],s=function(e){a(e),e?x()(".floatline").animate({marginLeft:"0px"}):x()(".floatline").animate({marginLeft:"300px"})};return Object(d.jsx)("div",{className:"UI",children:Object(d.jsxs)("div",{className:"form",children:[Object(d.jsx)("h3",{children:"Welcome"}),Object(d.jsxs)("div",{className:"status",children:[Object(d.jsx)("span",{}),Object(d.jsxs)("div",{className:"signin",onClick:function(){return s(!0)},children:[Object(d.jsx)("div",{className:"floatline"}),"SignIn"]}),Object(d.jsx)("div",{className:"register",onClick:function(){return s(!1)},children:"Register"})]}),n?Object(d.jsx)(f,{}):Object(d.jsx)(g,{})]})})}function w(){return u.a.auth().currentUser&&Object(d.jsx)("button",{onClick:function(){u.a.auth().signOut().then((function(e){console.log(e.user.uid)})).catch((function(e){}))},children:"SignOut"})}var C=n(58),k=n(59),N=function(){return Object(d.jsx)(k.CircleLoading,{})};u.a.initializeApp({apiKey:"AIzaSyDIFKORtZaeCcWSA7kuhb0c1Aw7-vtq-hU",authDomain:"chatapp-84774.firebaseapp.com",databaseURL:"https://chatapp-84774-default-rtdb.firebaseio.com",projectId:"chatapp-84774",storageBucket:"chatapp-84774.appspot.com",messagingSenderId:"543391953679",appId:"1:543391953679:web:c4f5fe4cb3cffea650847a"});var S=u.a.auth();var I=function(){var e=Object(C.a)(S),t=Object(r.a)(e,1)[0],n=Object(c.useState)(!0),a=Object(r.a)(n,2),s=a[0],i=a[1];return Object(c.useEffect)((function(){setTimeout((function(){i(!1)}),400)}),[]),Object(d.jsx)(d.Fragment,{children:s?Object(d.jsx)(N,{}):Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:Object(d.jsx)("span",{role:"img","aria-label":"message",children:"Community Chat App \ud83d\udcac"})}),Object(d.jsx)(w,{})]}),Object(d.jsx)("section",{children:t?Object(d.jsx)(O,{}):Object(d.jsx)(v,{user:!0})})]})})};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(I,{})}),document.getElementById("root"))},68:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},74:function(e,t,n){}},[[147,1,2]]]);
//# sourceMappingURL=main.75a1f06f.chunk.js.map